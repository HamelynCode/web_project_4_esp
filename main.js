!function(){"use strict";var e={};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.p="";var n=function(){function e(t,n,r,o){var i,a,l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=function(e){e.target.closest(".card").remove(),l._elem.querySelector(".btn_delete").removeEventListener("click",l._btnDeleteCallback)},(i="_btnDeleteCallback")in this?Object.defineProperty(this,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[i]=a,this._name=t,this._imgUrl=n,this._elem=this._getElementFromTemplate(r),this._imgCallback=o,this._handleEventListeners()}var n,r;return n=e,(r=[{key:"getElement",value:function(){return this._elem}},{key:"_getElementFromTemplate",value:function(e){var t=document.querySelector(e).content.querySelector(".card").cloneNode(!0),n=t.querySelector(".card__image");return n.name=this._name,n.src=this._imgUrl,n.alt=this._name,t.querySelector(".card__text").textContent=this._name,t}},{key:"_handleEventListeners",value:function(){this._btnDeleteClickHandler(),this._imgClickHandler(),this._btnLikeClickHandler()}},{key:"_btnDeleteClickHandler",value:function(){this._elem.querySelector(".btn_delete").addEventListener("click",this._btnDeleteCallback)}},{key:"_imgClickHandler",value:function(){this._elem.querySelector(".card__image").addEventListener("click",this._imgCallback)}},{key:"_btnLikeClickHandler",value:function(){this._elem.querySelector(".btn_like").addEventListener("click",(function(e){e.target.classList.toggle("btn_like_active")}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._form.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"checkValidity",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState(this._buttonElement)}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._handleEventListeners()}},{key:"_handleEventListeners",value:function(){var e=this;this._toggleButtonState(this._buttonElement),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._buttonElement)}))}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._config.inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._config.inactiveButtonClass))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t,n){var r=this,o=t.popupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_clickOverCallback",(function(e){e.target===r._elem&&r.close()})),a(this,"_btnCloseCallback",(function(e){r.close()})),a(this,"_handleEscClose",(function(e){switch(e.key){case"Esc":case"Escape":r.close()}})),this._elem=document.querySelector(o),this._hiddenClass=n.hiddenClass,this._btnClose=this._elem.querySelector(n.btnClose)}var t,n;return t=e,(n=[{key:"getElement",value:function(){return this._elem}},{key:"open",value:function(){this._elem.classList.remove(this._hiddenClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._elem.classList.add(this._hiddenClass)}},{key:"setEventListeners",value:function(){this._elem.addEventListener("click",this._clickOverCallback),this._btnClose.addEventListener("click",this._btnCloseCallback)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},s.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function b(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t,n){var r,o,l,c,u=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),c=function(e){r._submitExternalCallback(e),r.close()},(l="_submitInternalCallback")in(o=h(r=i.call(this,{popupSelector:u},t)))?Object.defineProperty(o,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[l]=c,r._inputList=Array.from(r._elem.querySelectorAll(t.inputSelector)),r._submitExternalCallback=n,r.setEventListeners(),r}return t=a,(n=[{key:"close",value:function(){s(y(a.prototype),"close",this).call(this),this._elem.reset()}},{key:"setEventListeners",value:function(){this._elem.addEventListener("submit",this._submitInternalCallback),s(y(a.prototype),"setEventListeners",this).call(this)}},{key:"getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){return e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function E(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e,t){var n,r,o,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l=function(e){n.open(e.target)},(o="showElement")in(r=w(n=i.call(this,{popupSelector:e},t)))?Object.defineProperty(r,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[o]=l,n._viewImg=n.getElement().querySelector(".view__image"),n._targetName=n.getElement().querySelector(".view__title"),n.setEventListeners(),n}return t=a,(n=[{key:"open",value:function(e){this._viewImg.src=e.src,this._viewImg.alt=e.alt,this._targetName.textContent=e.name,_(C(a.prototype),"open",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"render",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),I=e.p+"88e968b6c4d4574832db.png",q=e.p+"f0df977750300c9608ba.png",x=e.p+"eeae7d71a5c72e4cc0b5.png",R=e.p+"2812029f42facf531dde.png",V=e.p+"c82b35cc994010864a00.png",B=e.p+"16b4dea084f0df4d09a2.png",T={btnClose:".form__btn-close",hiddenClass:"popup_hidden",inputSelector:".input"},D={formSelector:".form",inputSelector:".input",submitButtonSelector:".form__btn-submit",inactiveButtonClass:"btn_inactive",inputErrorClass:"input_type_error"},H="#template-card",U=[{name:"Valle de Yosemite",link:I},{name:"Lago Louise",link:q},{name:"Montañas Calvas",link:x},{name:"Latemar",link:R},{name:"Vanoise National Park",link:V},{name:"Lago di Braies",link:B}];function A(e,t,r){return new n(e.name,e.link,t,r)}var N=new S(".view",{hiddenClass:"popup_hidden",btnClose:".view__btn-close"}),F=new L({items:U,renderer:function(e){var t=A(e,H,N.showElement);F.addItem(t.getElement())}},".elements");F.render();var M=new P({nameSelector:".profile__name",aboutSelector:".profile__about"}),Y=new d({popupSelector:"#form-edit"},T,(function(e){e.preventDefault(),M.setUserInfo({name:Y.getInputValues().name,about:Y.getInputValues().text})})),z=new o(D,Y.getElement());z.enableValidation(),document.querySelector(".btn_edit").addEventListener("click",(function(){var e=M.getUserInfo(),t=e.name,n=e.about;Y.setInputValues({name:t,text:n}),z.checkValidity(),Y.open()}));var G=new d({popupSelector:"#form-add"},T,(function(e){e.preventDefault();var t=G.getInputValues().name,n=G.getInputValues().text;if(t&&n){var r=A({name:t,link:n},H,N.showElement);F.addItem(r.getElement())}})),J=new o(D,G.getElement());J.enableValidation(),document.querySelector(".btn_add").addEventListener("click",(function(){J.checkValidity(),G.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSW5HLEVBQy9CeUUsRUFIeUJzQixFQUFZdkMsY0FNdkMyQyxFQUFxQkMsbUJBR0VqSCxTQUFTVixjRHJDVCxhQ3NDUm9CLGlCQUFpQixTQUFTLFdBQ3ZDLE1BQXdCaUcsRUFBS08sY0FBckJySSxFQUFSLEVBQVFBLEtBQU11RyxFQUFkLEVBQWNBLE1BQ2R3QixFQUFZTyxlQUFlLENBQUV0SSxLQUFNQSxFQUFNa0ksS0FBTTNCLElBQy9DNEIsRUFBcUJJLGdCQUNyQlIsRUFBWXpDLE1BQ2IsSUFHRCxJQUFNa0QsRUFBVyxJQUFJNUQsRUFDbkIsQ0FDRVYsY0QvQ2tCLGFDaURwQnNDLEdBQ0EsU0FBQ3BHLEdBQ0NBLEVBQUk0QyxpQkFDSixJQUFNaEQsRUFBT3dJLEVBQVNQLGlCQUFpQmpJLEtBQ2pDNkcsRUFBTzJCLEVBQVNQLGlCQUFpQkMsS0FDdkMsR0FBSWxJLEdBQVE2RyxFQUFNLENBQ2hCLElBQU1hLEVBQVVOLEVBQ2QsQ0FBRXBILEtBQU1BLEVBQU02RyxLQUFNQSxHQUNwQkYsRUFDQVksRUFBWUksYUFFZEgsRUFBYUksUUFBUUYsRUFBUWxDLGFBQzlCLENBQ0YsSUFLR2lELEVBQW9CLElBQUl6RyxFQUFjeUUsRUFGcEIrQixFQUFTaEQsY0FHakNpRCxFQUFrQkwsbUJBR0NqSCxTQUFTVixjRHRFVCxZQ3VFUm9CLGlCQUFpQixTQUFTLFdBQ25DNEcsRUFBa0JGLGdCQUNsQkMsRUFBU2xELE1BQ1YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IobmFtZSwgaW1nVXJsLCB0ZW1wbGF0ZVNlbGVjdG9yLCBpbWdDbGlja0NhbGxiYWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2ltZ1VybCA9IGltZ1VybDtcclxuICAgIHRoaXMuX2VsZW0gPSB0aGlzLl9nZXRFbGVtZW50RnJvbVRlbXBsYXRlKHRlbXBsYXRlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1nQ2FsbGJhY2sgPSBpbWdDbGlja0NhbGxiYWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbTtcclxuICB9XHJcblxyXG4gIF9nZXRFbGVtZW50RnJvbVRlbXBsYXRlKHRlbXBsYXRlU2VsZWN0b3IpIHtcclxuICAgIC8vY2xvbmFyIGVsIGVsZW1lbnRvIGNhcmQgcXVlIHNlIGVuY3VlbnRyYSBkZW50cm8gZGVsIHRlbXBsYXRlXHJcbiAgICBjb25zdCBlbGVtID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCBpbWcgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBpbWcubmFtZSA9IHRoaXMuX25hbWU7XHJcbiAgICBpbWcuc3JjID0gdGhpcy5faW1nVXJsO1xyXG4gICAgaW1nLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgY29uc3QgdGV4dCA9IGVsZW0ucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZXh0XCIpO1xyXG4gICAgdGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICByZXR1cm4gZWxlbTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2J0bkRlbGV0ZUNsaWNrSGFuZGxlcigpO1xyXG4gICAgdGhpcy5faW1nQ2xpY2tIYW5kbGVyKCk7XHJcbiAgICB0aGlzLl9idG5MaWtlQ2xpY2tIYW5kbGVyKCk7XHJcbiAgfVxyXG5cclxuICBfYnRuRGVsZXRlQ2xpY2tIYW5kbGVyKCkge1xyXG4gICAgY29uc3QgYnRuRGVsZXRlID0gdGhpcy5fZWxlbS5xdWVyeVNlbGVjdG9yKFwiLmJ0bl9kZWxldGVcIik7XHJcbiAgICBidG5EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2J0bkRlbGV0ZUNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIF9idG5EZWxldGVDYWxsYmFjayA9IChldnQpID0+IHtcclxuICAgIGV2dC50YXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpLnJlbW92ZSgpO1xyXG4gICAgY29uc3QgYnRuRGVsZXRlID0gdGhpcy5fZWxlbS5xdWVyeVNlbGVjdG9yKFwiLmJ0bl9kZWxldGVcIik7XHJcbiAgICBidG5EZWxldGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2J0bkRlbGV0ZUNhbGxiYWNrKTtcclxuICB9O1xyXG5cclxuICBfaW1nQ2xpY2tIYW5kbGVyKCkge1xyXG4gICAgY29uc3QgaW1nID0gdGhpcy5fZWxlbS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9pbWdDYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICBfYnRuTGlrZUNsaWNrSGFuZGxlcigpIHtcclxuICAgIGNvbnN0IGJ0bkxpa2UgPSB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuX2xpa2VcIik7XHJcbiAgICBidG5MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImJ0bl9saWtlX2FjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNoZWNrVmFsaWRpdHkoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9LCBpbmZvKSB7XHJcbiAgICB0aGlzLl9lbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hpZGRlbkNsYXNzID0gaW5mby5oaWRkZW5DbGFzcztcclxuICAgIHRoaXMuX2J0bkNsb3NlID0gdGhpcy5fZWxlbS5xdWVyeVNlbGVjdG9yKGluZm8uYnRuQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0RWxlbWVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2VsZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9oaWRkZW5DbGFzcyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX2VsZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9oaWRkZW5DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vY2VycmFyIGVsIGZvcm11bGFyaW8gY2xpY2tlYW5kbyBhZnVlcmFcclxuICAgIHRoaXMuX2VsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2NsaWNrT3ZlckNhbGxiYWNrKTtcclxuXHJcbiAgICAvL2NlcnJhciBlbCBmb3JtdWxhcmlvIGNvbiBlbCBidG4gY2VycmFyXHJcbiAgICB0aGlzLl9idG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fYnRuQ2xvc2VDYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICBfY2xpY2tPdmVyQ2FsbGJhY2sgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fZWxlbSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2J0bkNsb3NlQ2FsbGJhY2sgPSAoZXZ0KSA9PiB7XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgc3dpdGNoIChldnQua2V5KSB7XHJcbiAgICAgIGNhc2UgXCJFc2NcIjpcclxuICAgICAgY2FzZSBcIkVzY2FwZVwiOlxyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSwgaW5mbywgc3VibWl0Q2FsbGJhY2spIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9LCBpbmZvKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoaW5mby5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRFeHRlcm5hbENhbGxiYWNrID0gc3VibWl0Q2FsbGJhY2s7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9lbGVtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdWJtaXRJbnRlcm5hbENhbGxiYWNrKTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc3VibWl0SW50ZXJuYWxDYWxsYmFjayA9IChldnQpID0+IHtcclxuICAgIHRoaXMuX3N1Ym1pdEV4dGVybmFsQ2FsbGJhY2soZXZ0KTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9O1xyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goXHJcbiAgICAgIChpbnB1dCkgPT4gKHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxyXG4gICAgKTtcclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaW5mbykge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0sIGluZm8pO1xyXG4gICAgdGhpcy5fdmlld0ltZyA9IHRoaXMuZ2V0RWxlbWVudCgpLnF1ZXJ5U2VsZWN0b3IoXCIudmlld19faW1hZ2VcIik7XHJcbiAgICB0aGlzLl90YXJnZXROYW1lID0gdGhpcy5nZXRFbGVtZW50KCkucXVlcnlTZWxlY3RvcihcIi52aWV3X190aXRsZVwiKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIG9wZW4odGFyZ2V0KSB7XHJcbiAgICB0aGlzLl92aWV3SW1nLnNyYyA9IHRhcmdldC5zcmM7XHJcbiAgICB0aGlzLl92aWV3SW1nLmFsdCA9IHRhcmdldC5hbHQ7XHJcbiAgICB0aGlzLl90YXJnZXROYW1lLnRleHRDb250ZW50ID0gdGFyZ2V0Lm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxuICBzaG93RWxlbWVudCA9IChldnQpID0+IHtcclxuICAgIHRoaXMub3BlbihldnQudGFyZ2V0KTtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vIHJldG9ybmEgdW4gb2JqZXRvIGNvbiBsb3MgZGF0b3MgZGVsIHVzdWFyaW9cclxuICAgIHJldHVybiB7IG5hbWU6dGhpcy5fbmFtZS50ZXh0Q29udGVudCwgYWJvdXQ6dGhpcy5fYWJvdXQudGV4dENvbnRlbnR9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oe25hbWUsIGFib3V0fSkge1xyXG4gICAgLy9yZWNpdmUgdW4gb2JqZXRvIGNvbiBkYXRvcyBkZWwgdXN1YXJpbyB5IGxvIGFjdHVhbGl6YSBlbiBlbCBET01cclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHlvc2VtaXRlIGZyb20gXCIuLi9pbWFnZXMveW9zZW1pdGUucG5nXCI7XHJcbmltcG9ydCBsb3Vpc2UgZnJvbSBcIi4uL2ltYWdlcy9sb3Vpc2UucG5nXCI7XHJcbmltcG9ydCBjYWx2YXMgZnJvbSBcIi4uL2ltYWdlcy9jYWx2YXMucG5nXCI7XHJcbmltcG9ydCBsYXRlbWFyIGZyb20gXCIuLi9pbWFnZXMvbGF0ZW1hci5wbmdcIjtcclxuaW1wb3J0IHZhbm9pc2UgZnJvbSBcIi4uL2ltYWdlcy92YW5vaXNlLnBuZ1wiO1xyXG5pbXBvcnQgYnJhaWVzIGZyb20gXCIuLi9pbWFnZXMvZGktYnJhaWVzLnBuZ1wiO1xyXG5cclxuY29uc3QgZm9ybUluZm8gPSB7XHJcbiAgYnRuQ2xvc2U6IFwiLmZvcm1fX2J0bi1jbG9zZVwiLFxyXG4gIGhpZGRlbkNsYXNzOiBcInBvcHVwX2hpZGRlblwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmlucHV0XCJcclxufTtcclxuXHJcbmNvbnN0IHZhbGlkYXRvckNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idG4tc3VibWl0XCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidG5faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiaW5wdXRfdHlwZV9lcnJvclwiLFxyXG59O1xyXG5cclxuY29uc3Qgdmlld1NlY3Rpb25JbmZvID0ge1xyXG4gIGhpZGRlbkNsYXNzOiBcInBvcHVwX2hpZGRlblwiLFxyXG4gIGJ0bkNsb3NlOiBcIi52aWV3X19idG4tY2xvc2VcIixcclxufTtcclxuXHJcbmNvbnN0IGdsb2JhbEluZm8gPSB7XHJcbiAgdmlld1NlY3Rpb25DbGFzczogXCIudmlld1wiLFxyXG4gIGNhcmRUZW1wbGF0ZUlkOiBcIiN0ZW1wbGF0ZS1jYXJkXCIsXHJcbiAgY2FyZFNlY3Rpb25DbGFzczogXCIuZWxlbWVudHNcIixcclxuICBwcm9maWxlRm9ybVRlbXBsYXRlSWQ6IFwiI2Zvcm0tZWRpdFwiLFxyXG4gIGZvcm1DbGFzczogXCIuZm9ybVwiLFxyXG4gIHByb2ZpbGVOYW1lQ2xhc3M6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBwcm9maWxlQWJvdXRDbGFzczogXCIucHJvZmlsZV9fYWJvdXRcIixcclxuICBidG5FZGl0UHJvZmlsZUNsYXNzOiBcIi5idG5fZWRpdFwiLFxyXG4gIGNhcmRGb3JtVGVtcGxhdGVJZDogXCIjZm9ybS1hZGRcIixcclxuICBidG5BZGRDYXJkQ2xhc3M6IFwiLmJ0bl9hZGRcIixcclxufTtcclxuXHJcbi8vYXJyYXkgZGUgZWxlbWVudG9zIFwiY2FyZFwiIGluaWNpYWxlc1xyXG5jb25zdCBjYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXHJcbiAgICBsaW5rOiB5b3NlbWl0ZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcclxuICAgIGxpbms6IGxvdWlzZSxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxyXG4gICAgbGluazogY2FsdmFzLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBsYXRlbWFyLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IHZhbm9pc2UsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBicmFpZXMsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgZm9ybUluZm8sXHJcbiAgdmlld1NlY3Rpb25JbmZvLFxyXG4gIHZhbGlkYXRvckNvbmZpZyxcclxuICBnbG9iYWxJbmZvLFxyXG4gIGNhcmRzLFxyXG59O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBmb3JtSW5mbyxcclxuICB2aWV3U2VjdGlvbkluZm8sXHJcbiAgZ2xvYmFsSW5mbyxcclxuICB2YWxpZGF0b3JDb25maWcsXHJcbiAgY2FyZHMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSwgc2VsZWN0b3IsIGNhbGxiYWNrKSB7XHJcbiAgcmV0dXJuIG5ldyBDYXJkKGl0ZW0ubmFtZSwgaXRlbS5saW5rLCBzZWxlY3RvciwgY2FsbGJhY2spO1xyXG59XHJcblxyXG5jb25zdCB2aWV3U2VjdGlvbiA9IG5ldyBQb3B1cFdpdGhJbWFnZShcclxuICBnbG9iYWxJbmZvLnZpZXdTZWN0aW9uQ2xhc3MsXHJcbiAgdmlld1NlY3Rpb25JbmZvXHJcbik7XHJcblxyXG4vKi0tLS0tLS0gQ2FyZCBFbGVtZW50cyAtLS0tLS0tKi9cclxuY29uc3Qgc2VjdGlvbkNhcmRzID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKFxyXG4gICAgICAgIGNhcmQsXHJcbiAgICAgICAgZ2xvYmFsSW5mby5jYXJkVGVtcGxhdGVJZCxcclxuICAgICAgICB2aWV3U2VjdGlvbi5zaG93RWxlbWVudFxyXG4gICAgICApO1xyXG4gICAgICBzZWN0aW9uQ2FyZHMuYWRkSXRlbShuZXdDYXJkLmdldEVsZW1lbnQoKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgZ2xvYmFsSW5mby5jYXJkU2VjdGlvbkNsYXNzXHJcbik7XHJcbnNlY3Rpb25DYXJkcy5yZW5kZXIoKTtcclxuXHJcbi8qLS0tLS0tLS0gRm9ybSBFZGl0IFByb2ZpbGUgLS0tLS0tLS0qL1xyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IGdsb2JhbEluZm8ucHJvZmlsZU5hbWVDbGFzcyxcclxuICBhYm91dFNlbGVjdG9yOiBnbG9iYWxJbmZvLnByb2ZpbGVBYm91dENsYXNzLFxyXG59KTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXBTZWxlY3RvcjogZ2xvYmFsSW5mby5wcm9maWxlRm9ybVRlbXBsYXRlSWRcclxuICB9LFxyXG4gIGZvcm1JbmZvLFxyXG4gIChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdXNlci5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHByb2ZpbGVGb3JtLmdldElucHV0VmFsdWVzKCkubmFtZSxcclxuICAgICAgYWJvdXQ6IHByb2ZpbGVGb3JtLmdldElucHV0VmFsdWVzKCkudGV4dCxcclxuICAgIH0pO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IHByb2ZpbGVGb3JtLmdldEVsZW1lbnQoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdG9yQ29uZmlnLFxyXG4gIHByb2ZpbGVGb3JtRWxlbWVudFxyXG4pO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL2NvbXBvcnRhbWllbnRvIGRlbCBib3RvbiBwYXJhIGFicmlyIGVsIGZvcm11bGFyaW9cclxuY29uc3QgYnRuRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdsb2JhbEluZm8uYnRuRWRpdFByb2ZpbGVDbGFzcyk7XHJcbmJ0bkVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVGb3JtLnNldElucHV0VmFsdWVzKHsgbmFtZTogbmFtZSwgdGV4dDogYWJvdXQgfSk7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuY2hlY2tWYWxpZGl0eSgpO1xyXG4gIHByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG4vKi0tLS0tLS0tIEZvcm0gQWRkIENhcmQgLS0tLS0tLS0qL1xyXG5jb25zdCBjYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHtcclxuICAgIHBvcHVwU2VsZWN0b3I6IGdsb2JhbEluZm8uY2FyZEZvcm1UZW1wbGF0ZUlkXHJcbiAgfSxcclxuICBmb3JtSW5mbyxcclxuICAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjYXJkRm9ybS5nZXRJbnB1dFZhbHVlcygpLm5hbWU7XHJcbiAgICBjb25zdCBsaW5rID0gY2FyZEZvcm0uZ2V0SW5wdXRWYWx1ZXMoKS50ZXh0O1xyXG4gICAgaWYgKG5hbWUgJiYgbGluaykge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChcclxuICAgICAgICB7IG5hbWU6IG5hbWUsIGxpbms6IGxpbmsgfSxcclxuICAgICAgICBnbG9iYWxJbmZvLmNhcmRUZW1wbGF0ZUlkLFxyXG4gICAgICAgIHZpZXdTZWN0aW9uLnNob3dFbGVtZW50XHJcbiAgICAgICk7XHJcbiAgICAgIHNlY3Rpb25DYXJkcy5hZGRJdGVtKG5ld0NhcmQuZ2V0RWxlbWVudCgpKTtcclxuICAgIH1cclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBjYXJkRm9ybUVsZW1lbnQgPSBjYXJkRm9ybS5nZXRFbGVtZW50KCk7XHJcblxyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRvckNvbmZpZywgY2FyZEZvcm1FbGVtZW50KTtcclxuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy9jb21wb3J0YW1pZW50byBkZWwgYm90b24gcGFyYSBhYnJpciBlbCBmb3JtdWxhcmlvXHJcbmNvbnN0IGJ0bkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdsb2JhbEluZm8uYnRuQWRkQ2FyZENsYXNzKTtcclxuYnRuQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLmNoZWNrVmFsaWRpdHkoKTtcclxuICBjYXJkRm9ybS5vcGVuKCk7XHJcbn0pOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsIkNhcmQiLCJuYW1lIiwiaW1nVXJsIiwidGVtcGxhdGVTZWxlY3RvciIsImltZ0NsaWNrQ2FsbGJhY2siLCJldnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmVtb3ZlIiwiX2VsZW0iLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9idG5EZWxldGVDYWxsYmFjayIsInRoaXMiLCJfbmFtZSIsIl9pbWdVcmwiLCJfZ2V0RWxlbWVudEZyb21UZW1wbGF0ZSIsIl9pbWdDYWxsYmFjayIsIl9oYW5kbGVFdmVudExpc3RlbmVycyIsImVsZW0iLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJpbWciLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9idG5EZWxldGVDbGlja0hhbmRsZXIiLCJfaW1nQ2xpY2tIYW5kbGVyIiwiX2J0bkxpa2VDbGlja0hhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfY29uZmlnIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImlucHV0IiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiYWRkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwic29tZSIsIlBvcHVwIiwiaW5mbyIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsImtleSIsIl9oaWRkZW5DbGFzcyIsImhpZGRlbkNsYXNzIiwiX2J0bkNsb3NlIiwiYnRuQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfY2xpY2tPdmVyQ2FsbGJhY2siLCJfYnRuQ2xvc2VDYWxsYmFjayIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRDYWxsYmFjayIsIl9zdWJtaXRFeHRlcm5hbENhbGxiYWNrIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZXNldCIsIl9zdWJtaXRJbnRlcm5hbENhbGxiYWNrIiwidmFsdWVzIiwidmFsdWUiLCJkYXRhIiwiUG9wdXBXaXRoSW1hZ2UiLCJvcGVuIiwiX3ZpZXdJbWciLCJnZXRFbGVtZW50IiwiX3RhcmdldE5hbWUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiX2Fib3V0IiwiYWJvdXQiLCJmb3JtSW5mbyIsInZhbGlkYXRvckNvbmZpZyIsImZvcm1TZWxlY3RvciIsImdsb2JhbEluZm8iLCJjYXJkcyIsImxpbmsiLCJ5b3NlbWl0ZSIsImxvdWlzZSIsImNhbHZhcyIsImxhdGVtYXIiLCJ2YW5vaXNlIiwiYnJhaWVzIiwiY3JlYXRlQ2FyZCIsInNlbGVjdG9yIiwiY2FsbGJhY2siLCJ2aWV3U2VjdGlvbiIsInNlY3Rpb25DYXJkcyIsImNhcmQiLCJuZXdDYXJkIiwic2hvd0VsZW1lbnQiLCJhZGRJdGVtIiwicmVuZGVyIiwidXNlciIsInByb2ZpbGVGb3JtIiwic2V0VXNlckluZm8iLCJnZXRJbnB1dFZhbHVlcyIsInRleHQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJnZXRVc2VySW5mbyIsInNldElucHV0VmFsdWVzIiwiY2hlY2tWYWxpZGl0eSIsImNhcmRGb3JtIiwiY2FyZEZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9