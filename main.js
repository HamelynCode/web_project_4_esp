!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,i,o,a){var l,u,c=this,s=e.id,f=e.name,h=e.imgUrl,d=e.likes;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u=function(){c._deleteCallback()},(l="_btnDeleteCallback")in this?Object.defineProperty(this,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):this[l]=u,this._id=s,this._name=f,this._imgUrl=h,this._info=n,this._likes=d,this._elem=this._getElementFromTemplate(this._info.templateSelector),this._img=this._elem.querySelector(this._info.imgClass),this._btnDelete=this._elem.querySelector(this._info.btnDeleteClass),this._btnLike=this._elem.querySelector(this._info.btnLikeClass),this._likesCount=this._elem.querySelector(this._info.likesCountClass),this._likesCount.textContent=this._likes.length,this._likes.length>0&&this._btnLike.classList.add(this._info.btnLikeActiveClass),this._deleteCallback=i,this._imgCallback=r,this._likeCallback=o,this._handleEventListeners(),a&&this._btnDelete.classList.remove(this._info.btnDeleteHidden)}var n,r;return n=t,(r=[{key:"getElement",value:function(){return this._elem}},{key:"getCardId",value:function(){return this._id}},{key:"setLikes",value:function(e){this._likesCount.textContent=e}},{key:"_getElementFromTemplate",value:function(e){var t=document.querySelector(e).content.querySelector(this._info.cardClass).cloneNode(!0),n=t.querySelector(this._info.imgClass);return n.name=this._name,n.src=this._imgUrl,n.alt=this._name,t.querySelector(this._info.cardTextClass).textContent=this._name,t}},{key:"_handleEventListeners",value:function(){this._btnDeleteClickHandler(),this._imgClickHandler(),this._btnLikeClickHandler()}},{key:"_btnDeleteClickHandler",value:function(){this._btnDelete.addEventListener("click",this._btnDeleteCallback)}},{key:"removeCard",value:function(){this._elem.remove(),this._btnDelete.removeEventListener("click",this._btnDeleteCallback)}},{key:"_imgClickHandler",value:function(){this._img.addEventListener("click",this._imgCallback)}},{key:"_btnLikeClickHandler",value:function(){var e=this;this._btnLike.addEventListener("click",(function(t){t.target.classList.contains(e._info.btnLikeActiveClass)?e._likeCallback(!1).then((function(n){t.target.classList.remove(e._info.btnLikeActiveClass),e._likesCount.textContent=n.likes.length})):e._likeCallback(!0).then((function(n){t.target.classList.add(e._info.btnLikeActiveClass),e._likesCount.textContent=n.likes.length}))}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._form.querySelector(this._config.submitButtonSelector)}var t,r;return t=e,(r=[{key:"checkValidity",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState(this._buttonElement)}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._handleEventListeners()}},{key:"_handleEventListeners",value:function(){var e=this;this._toggleButtonState(this._buttonElement),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._buttonElement)}))}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._config.inactiveButtonClass)):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._config.inactiveButtonClass))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n){var r=this,i=t.popupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_clickOverCallback",(function(e){e.target===r._elem&&r.close()})),o(this,"_btnCloseCallback",(function(e){r.close()})),o(this,"_handleEscClose",(function(e){switch(e.key){case"Esc":case"Escape":r.close()}})),this._elem=document.querySelector(i),this._hiddenClass=n.hiddenClass,this._btnClose=this._elem.querySelector(n.btnClose)}var t,n;return t=e,(n=[{key:"getElement",value:function(){return this._elem}},{key:"open",value:function(){this._elem.classList.remove(this._hiddenClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._elem.classList.add(this._hiddenClass)}},{key:"setEventListeners",value:function(){this._elem.addEventListener("click",this._clickOverCallback),this._btnClose.addEventListener("click",this._btnCloseCallback)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},c.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(i){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e,t,n){var r,i,l,u,c=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e){r._submitExternalCallback(e)},(l="_submitInternalCallback")in(i=d(r=o.call(this,{popupSelector:c},t)))?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,r._inputList=Array.from(r._elem.querySelectorAll(t.inputSelector)),r._btnSubmit=r._elem.querySelector(t.btnSubmitSelector),r._submitExternalCallback=n,r.setEventListeners(),r}return t=a,(n=[{key:"close",value:function(){c(p(a.prototype),"close",this).call(this),this._elem.reset()}},{key:"setEventListeners",value:function(){this._elem.addEventListener("submit",this._submitInternalCallback),c(p(a.prototype),"setEventListeners",this).call(this)}},{key:"getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){return e[t.name]=t.value})),e}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setSubmitButtonText",value:function(e){this._btnSubmit.textContent=e}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(i){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function a(e,t){var n,r,i,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l=function(e){n.open(e.target)},(i="showElement")in(r=C(n=o.call(this,{popupSelector:e},t)))?Object.defineProperty(r,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[i]=l,n._viewImg=n.getElement().querySelector(".view__image"),n._targetName=n.getElement().querySelector(".view__title"),n.setEventListeners(),n}return t=a,(n=[{key:"open",value:function(e){this._viewImg.src=e.src,this._viewImg.alt=e.alt,this._targetName.textContent=e.name,m(w(a.prototype),"open",this).call(this)}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function j(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=T(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},I.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(i){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e,t){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),I((n=P(r=o.call(this,{popupSelector:e},t)),x(a.prototype)),"setEventListeners",n).call(n),r}return t=a,(n=[{key:"show",value:function(){this._elem.classList.remove(this._hiddenClass)}},{key:"hide",value:function(){this._elem.classList.add(this._hiddenClass)}},{key:"setSubmitListener",value:function(e){this._elem.addEventListener("submit",e)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t,n){var r=t.items,i=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=i,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"render",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t,e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataId="",this._dataName="",this._dataAbout="",this._dataImgUrl="",this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(i),this._avatar.src=this._dataImgUrl}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"getId",value:function(){return this._dataId}},{key:"setInitialData",value:function(e){var t=e.id,n=e.name,r=e.about,i=e.imgUrl;this._dataId=t,this._dataName=n,this._dataAbout=r,this._dataImgUrl=i,this.setUserInfo({name:n,about:r}),this.setUserAvatar(this._dataImgUrl)}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){var n=t.user,r=t.url,i=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._user=n,this._url=r,this._headers=i}var t,n;return t=e,(n=[{key:"_makeRequest",value:function(e,t,n){return fetch("".concat(this._url).concat(t),{method:e,headers:this._headers,body:"GET"!==e?JSON.stringify(n):void 0}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}},{key:"getUserInfo",value:function(){return this._makeRequest("GET","/users/".concat(this._user))}},{key:"getInitialCards",value:function(){return this._makeRequest("GET","/cards")}},{key:"editProfile",value:function(e,t){return this._makeRequest("PATCH","/users/".concat(this._user),{name:e,about:t})}},{key:"addNewCard",value:function(e,t){return this._makeRequest("POST","/cards",{name:e,link:t})}},{key:"deleteCard",value:function(e){return this._makeRequest("DELETE","/cards/".concat(e))}},{key:"addNewLike",value:function(e){return this._makeRequest("PUT","/cards/likes/".concat(e))}},{key:"removeLike",value:function(e){return this._makeRequest("DELETE","/cards/likes/".concat(e))}},{key:"setProfileImage",value:function(e){return this._makeRequest("PATCH","/users/".concat(this._user,"/avatar"),{avatar:e})}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N={btnClose:".form__btn-close",hiddenClass:"popup_hidden",inputSelector:".input",btnSubmitSelector:".btn_submit"},H="Guardando...",G="Guardar",F={cardClass:".card",imgClass:".card__image",btnDeleteClass:".btn_delete",btnDeleteHidden:"btn_delete_hidden",btnLikeClass:".btn_like",cardTextClass:".card__text",btnLikeActiveClass:"btn_like_active",templateSelector:"#template-card",likesCountClass:".card__likes-count"},z={formSelector:".form",inputSelector:".input",submitButtonSelector:".form__btn-submit",inactiveButtonClass:"btn_inactive",inputErrorClass:"input_type_error"},J={user:"me",url:"https://around.nomoreparties.co/v1/web_es_cohort_02",headers:{authorization:"43821f01-4b26-43b6-994f-72bfc960dac4","Content-Type":"application/json"}},M=function(e){console.log(e)},K=new A({user:J.user,url:J.url,headers:J.headers}),Q=new E(".view",{hiddenClass:"popup_hidden",btnClose:".view__btn-close"}),W=new R("#form-delete",N),X=new U({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__avatar"});function Y(e,n,r,i,o){var a=o===e.owner._id;return new t({id:e._id,name:e.name,imgUrl:e.link,likes:e.likes},F,n,r,i,a)}function Z(e){W.setSubmitListener((function(t){t.preventDefault(),K.deleteCard(e.getCardId()).then((function(t){e.removeCard(),W.hide()})).catch(M)})),W.show()}function $(e,t){var n=Y(e,Q.showElement,(function(){Z(n)}),(function(e){return e?K.addNewLike(n.getCardId()):K.removeLike(n.getCardId())}),X.getId());t.addItem(n.getElement())}K.getUserInfo().then((function(e){X.setInitialData({id:e._id,name:e.name,about:e.about,imgUrl:e.avatar});var t=new b({popupSelector:"#form-edit"},N,(function(e){e.preventDefault(),t.setSubmitButtonText(H),K.editProfile(t.getInputValues().name,t.getInputValues().text).then((function(e){K.getUserInfo().then((function(e){X.setUserInfo({name:e.name,about:e.about})})).catch(M).finally((function(){t.close(),t.setSubmitButtonText(G)}))})).catch(M)})),n=t.getElement(),i=new r(z,n);i.enableValidation(),document.querySelector(".btn_edit").addEventListener("click",(function(){var e=X.getUserInfo(),n=e.name,r=e.about;t.setInputValues({name:n,text:r}),i.checkValidity(),t.open()}));var o=new b({popupSelector:"#form-profile-img"},N,(function(){var e=o.getInputValues().text;o.setSubmitButtonText(H),K.setProfileImage(e).then((function(t){X.setUserAvatar(e)})).catch(M).finally((function(){o.close(),o.setSubmitButtonText(G)}))})),a=new r(z,o.getElement());a.enableValidation(),document.querySelector(".profile__edit-cover").addEventListener("click",(function(){a.checkValidity(),o.open()}))})).catch(M).then((function(){return K.getInitialCards().then((function(e){var t=new D({items:e.reverse(),renderer:$},".elements");t.render();var n=new b({popupSelector:"#form-add"},N,(function(e){e.preventDefault();var r=n.getInputValues().name,i=n.getInputValues().text;n.setSubmitButtonText(H),r&&i&&K.addNewCard(r,i).then((function(e){var n=Y(e,Q.showElement,(function(){Z(n)}),(function(e){return e?K.addNewLike(n.getCardId()):K.removeLike(n.getCardId())}),X.getId());t.addItem(n.getElement())})).catch(M).finally((function(){n.close(),n.setSubmitButtonText(G)}))})),i=n.getElement(),o=new r(z,i);o.enableValidation(),document.querySelector(".btn_add").addEventListener("click",(function(){o.checkValidity(),n.open()}))})).catch(M)})).catch(M)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVcsSUFBSXZILEVBQ25CLENBQ0VWLGNGOUpZLGFFZ0tkeUUsR0FDQSxTQUFDN0csR0FDQ0EsRUFBSXFCLGlCQUNKLElBQU1wRSxFQUFPb04sRUFBU2YsaUJBQWlCck0sS0FDakN5SixFQUFPMkQsRUFBU2YsaUJBQWlCN0YsS0FDdkM0RyxFQUFTakIsb0JBQW9CdEMsR0FDekI3SixHQUFReUosR0FDVmMsRUFDRzhDLFdBQVdyTixFQUFNeUosR0FDakJ2RyxNQUFLLFNBQUNDLEdBQ0wsSUFBTXNJLEVBQVVmLEVBQ2R2SCxFQUNBcUgsRUFBWWtCLGFBQ1osV0FDRVosRUFBbUJXLEVBQ3BCLElBQ0QsU0FBQ0UsR0FDQyxPQUFJQSxFQUNLcEIsRUFBSXFCLFdBQVdILEVBQVFQLGFBRXZCWCxFQUFJc0IsV0FBV0osRUFBUVAsWUFFakMsR0FDRDFDLEVBQUtzRCxTQUVQbUIsRUFBYWxCLFFBQVFOLEVBQVE3RSxhQUM5QixJQUNBeUUsTUFBTWxCLEdBQ05tQyxTQUFRLFdBQ1BjLEVBQVNoSSxRQUNUZ0ksRUFBU2pCLG9CQUFvQnRDLEVBQzlCLEdBRU4sSUFHR3lELEVBQWtCRixFQUFTeEcsYUFFM0IyRyxFQUFvQixJQUFJbkssRUFDNUIyRyxFQUNBdUQsR0FFRkMsRUFBa0JkLG1CQUdDeEssU0FBU25CLGNGNU1mLFlFNk1GOEIsaUJBQWlCLFNBQVMsV0FDbkMySyxFQUFrQlosZ0JBQ2xCUyxFQUFTMUcsTUFDVixHQUNGLElBQ0EyRSxNQUFNbEIsRUFDVixJQUVvQ2tCLE1BQU1sQixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7aWQsIG5hbWUsIGltZ1VybCwgbGlrZXN9LCBpbmZvLCBpbWdDbGlja0NhbGxiYWNrLCBkZWxldGVDYWxsYmFjaywgbGlrZUNhbGxiYWNrLCBjYW5EZWxldGUpIHtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2ltZ1VybCA9IGltZ1VybDtcclxuICAgIHRoaXMuX2luZm8gPSBpbmZvO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX2VsZW0gPSB0aGlzLl9nZXRFbGVtZW50RnJvbVRlbXBsYXRlKHRoaXMuX2luZm8udGVtcGxhdGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWcgPSB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5mby5pbWdDbGFzcyk7XHJcbiAgICB0aGlzLl9idG5EZWxldGUgPSB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5mby5idG5EZWxldGVDbGFzcyk7XHJcbiAgICB0aGlzLl9idG5MaWtlID0gdGhpcy5fZWxlbS5xdWVyeVNlbGVjdG9yKHRoaXMuX2luZm8uYnRuTGlrZUNsYXNzKTtcclxuICAgIHRoaXMuX2xpa2VzQ291bnQgPSB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5mby5saWtlc0NvdW50Q2xhc3MpO1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICBjb25zdCBtaW5pbXVtTGlrZXMgPSAwO1xyXG4gICAgaWYodGhpcy5fbGlrZXMubGVuZ3RoID4gbWluaW11bUxpa2VzKXtcclxuICAgICAgdGhpcy5fYnRuTGlrZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2luZm8uYnRuTGlrZUFjdGl2ZUNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9kZWxldGVDYWxsYmFjayA9IGRlbGV0ZUNhbGxiYWNrO1xyXG4gICAgdGhpcy5faW1nQ2FsbGJhY2sgPSBpbWdDbGlja0NhbGxiYWNrO1xyXG4gICAgdGhpcy5fbGlrZUNhbGxiYWNrID0gbGlrZUNhbGxiYWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIFxyXG4gICAgaWYoY2FuRGVsZXRlKXtcclxuICAgICAgdGhpcy5fYnRuRGVsZXRlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5mby5idG5EZWxldGVIaWRkZW4pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0RWxlbWVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgc2V0TGlrZXMobGlrZXMpe1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudC50ZXh0Q29udGVudCA9IGxpa2VzO1xyXG4gIH1cclxuXHJcbiAgX2dldEVsZW1lbnRGcm9tVGVtcGxhdGUodGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgLy9jbG9uYXIgZWwgZWxlbWVudG8gY2FyZCBxdWUgc2UgZW5jdWVudHJhIGRlbnRybyBkZWwgdGVtcGxhdGVcclxuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2luZm8uY2FyZENsYXNzKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgY29uc3QgaW1nID0gZWxlbS5xdWVyeVNlbGVjdG9yKHRoaXMuX2luZm8uaW1nQ2xhc3MpO1xyXG4gICAgaW1nLm5hbWUgPSB0aGlzLl9uYW1lO1xyXG4gICAgaW1nLnNyYyA9IHRoaXMuX2ltZ1VybDtcclxuICAgIGltZy5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIGNvbnN0IHRleHQgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5mby5jYXJkVGV4dENsYXNzKTtcclxuICAgIHRleHQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgcmV0dXJuIGVsZW07XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9idG5EZWxldGVDbGlja0hhbmRsZXIoKTtcclxuICAgIHRoaXMuX2ltZ0NsaWNrSGFuZGxlcigpO1xyXG4gICAgdGhpcy5fYnRuTGlrZUNsaWNrSGFuZGxlcigpO1xyXG4gIH1cclxuXHJcbiAgX2J0bkRlbGV0ZUNsaWNrSGFuZGxlcigpIHtcclxuICAgIHRoaXMuX2J0bkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fYnRuRGVsZXRlQ2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgX2J0bkRlbGV0ZUNhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FsbGJhY2soKTtcclxuICB9O1xyXG5cclxuICByZW1vdmVDYXJkKCl7XHJcbiAgICB0aGlzLl9lbGVtLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fYnRuRGVsZXRlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9idG5EZWxldGVDYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICBfaW1nQ2xpY2tIYW5kbGVyKCkge1xyXG4gICAgdGhpcy5faW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9pbWdDYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICBfYnRuTGlrZUNsaWNrSGFuZGxlcigpIHtcclxuICAgIHRoaXMuX2J0bkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5faW5mby5idG5MaWtlQWN0aXZlQ2xhc3MpKXtcclxuICAgICAgICB0aGlzLl9saWtlQ2FsbGJhY2soZmFsc2UpLnRoZW4oKHJlcyk9PntcclxuICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmZvLmJ0bkxpa2VBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICB0aGlzLl9saWtlc0NvdW50LnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgdGhpcy5fbGlrZUNhbGxiYWNrKHRydWUpLnRoZW4oKHJlcyk9PntcclxuICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmZvLmJ0bkxpa2VBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICB0aGlzLl9saWtlc0NvdW50LnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tWYWxpZGl0eSgpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0sIGluZm8pIHtcclxuICAgIHRoaXMuX2VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGlkZGVuQ2xhc3MgPSBpbmZvLmhpZGRlbkNsYXNzO1xyXG4gICAgdGhpcy5fYnRuQ2xvc2UgPSB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3IoaW5mby5idG5DbG9zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW07XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fZWxlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2hpZGRlbkNsYXNzKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fZWxlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX2hpZGRlbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy9jZXJyYXIgZWwgZm9ybXVsYXJpbyBjbGlja2VhbmRvIGFmdWVyYVxyXG4gICAgdGhpcy5fZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xpY2tPdmVyQ2FsbGJhY2spO1xyXG5cclxuICAgIC8vY2VycmFyIGVsIGZvcm11bGFyaW8gY29uIGVsIGJ0biBjZXJyYXJcclxuICAgIHRoaXMuX2J0bkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9idG5DbG9zZUNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIF9jbGlja092ZXJDYWxsYmFjayA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9lbGVtKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfYnRuQ2xvc2VDYWxsYmFjayA9IChldnQpID0+IHtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBzd2l0Y2ggKGV2dC5rZXkpIHtcclxuICAgICAgY2FzZSBcIkVzY1wiOlxyXG4gICAgICBjYXNlIFwiRXNjYXBlXCI6XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9LCBpbmZvLCBzdWJtaXRDYWxsYmFjaykge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0sIGluZm8pO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2VsZW0ucXVlcnlTZWxlY3RvckFsbChpbmZvLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2J0blN1Ym1pdCA9IHRoaXMuX2VsZW0ucXVlcnlTZWxlY3RvcihpbmZvLmJ0blN1Ym1pdFNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRFeHRlcm5hbENhbGxiYWNrID0gc3VibWl0Q2FsbGJhY2s7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9lbGVtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdWJtaXRJbnRlcm5hbENhbGxiYWNrKTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc3VibWl0SW50ZXJuYWxDYWxsYmFjayA9IChldnQpID0+IHtcclxuICAgIHRoaXMuX3N1Ym1pdEV4dGVybmFsQ2FsbGJhY2soZXZ0KTtcclxuICB9O1xyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAodmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRCdXR0b25UZXh0KHRleHQpIHtcclxuICAgIHRoaXMuX2J0blN1Ym1pdC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaW5mbykge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0sIGluZm8pO1xyXG4gICAgdGhpcy5fdmlld0ltZyA9IHRoaXMuZ2V0RWxlbWVudCgpLnF1ZXJ5U2VsZWN0b3IoXCIudmlld19faW1hZ2VcIik7XHJcbiAgICB0aGlzLl90YXJnZXROYW1lID0gdGhpcy5nZXRFbGVtZW50KCkucXVlcnlTZWxlY3RvcihcIi52aWV3X190aXRsZVwiKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIG9wZW4odGFyZ2V0KSB7XHJcbiAgICB0aGlzLl92aWV3SW1nLnNyYyA9IHRhcmdldC5zcmM7XHJcbiAgICB0aGlzLl92aWV3SW1nLmFsdCA9IHRhcmdldC5hbHQ7XHJcbiAgICB0aGlzLl90YXJnZXROYW1lLnRleHRDb250ZW50ID0gdGFyZ2V0Lm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxuICBzaG93RWxlbWVudCA9IChldnQpID0+IHtcclxuICAgIHRoaXMub3BlbihldnQudGFyZ2V0KTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGluZm8pIHtcclxuICAgIHN1cGVyKHtwb3B1cFNlbGVjdG9yfSwgaW5mbyk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgc2hvdygpe1xyXG4gICAgdGhpcy5fZWxlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2hpZGRlbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIGhpZGUoKXtcclxuICAgIHRoaXMuX2VsZW0uY2xhc3NMaXN0LmFkZCh0aGlzLl9oaWRkZW5DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5fZWxlbS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGNhbGxiYWNrKTtcclxuICB9XHJcbiAgLypcclxuICByZW1vdmVTdWJtaXRMaXN0ZW5lcigpe1xyXG4gICAgdGhpcy5fZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2NhbGxiYWNrKTtcclxuICB9Ki9cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgdGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3J9KSB7XHJcbiAgICB0aGlzLl9kYXRhSWQgPSBcIlwiO1xyXG4gICAgdGhpcy5fZGF0YU5hbWUgPSBcIlwiO1xyXG4gICAgdGhpcy5fZGF0YUFib3V0ID0gXCJcIjtcclxuICAgIHRoaXMuX2RhdGFJbWdVcmwgPSBcIlwiO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IHRoaXMuX2RhdGFJbWdVcmw7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vIHJldG9ybmEgdW4gb2JqZXRvIGNvbiBsb3MgZGF0b3MgZGVsIHVzdWFyaW9cclxuICAgIHJldHVybiB7IG5hbWU6dGhpcy5fbmFtZS50ZXh0Q29udGVudCwgYWJvdXQ6dGhpcy5fYWJvdXQudGV4dENvbnRlbnR9O1xyXG4gIH1cclxuXHJcbiAgZ2V0SWQoKXtyZXR1cm4gdGhpcy5fZGF0YUlkO31cclxuXHJcbiAgc2V0SW5pdGlhbERhdGEoe2lkLCBuYW1lLCBhYm91dCwgaW1nVXJsfSl7XHJcbiAgICB0aGlzLl9kYXRhSWQgPSBpZDtcclxuICAgIHRoaXMuX2RhdGFOYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2RhdGFBYm91dCA9IGFib3V0O1xyXG4gICAgdGhpcy5fZGF0YUltZ1VybCA9IGltZ1VybDtcclxuICAgIHRoaXMuc2V0VXNlckluZm8oe25hbWUsIGFib3V0fSk7XHJcbiAgICB0aGlzLnNldFVzZXJBdmF0YXIodGhpcy5fZGF0YUltZ1VybCk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHVybCl7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXJsO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oe25hbWUsIGFib3V0fSkge1xyXG4gICAgLy9yZWNpdmUgdW4gb2JqZXRvIGNvbiBkYXRvcyBkZWwgdXN1YXJpbyB5IGxvIGFjdHVhbGl6YSBlbiBlbCBET01cclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXIsIHVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl91c2VyID0gdXNlcjtcclxuICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX21ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsLCBib2R5KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfSR7dXJsfWAsIHtcclxuICAgICAgbWV0aG9kOiBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IG1ldGhvZCAhPT0gXCJHRVRcIiA/IEpTT04uc3RyaW5naWZ5KGJvZHkpIDogdW5kZWZpbmVkLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIkdFVFwiLCBgL3VzZXJzLyR7dGhpcy5fdXNlcn1gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIkdFVFwiLCBcIi9jYXJkc1wiKTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXCJQQVRDSFwiLCBgL3VzZXJzLyR7dGhpcy5fdXNlcn1gLCB7XHJcbiAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgIGFib3V0OiBhYm91dCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChuYW1lLCB1cmwpIHtcclxuICAgIHJldHVybiB0aGlzLl9tYWtlUmVxdWVzdChcIlBPU1RcIiwgYC9jYXJkc2AsIHtcclxuICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgbGluazogdXJsLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiREVMRVRFXCIsIGAvY2FyZHMvJHtjYXJkSWR9YCk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiUFVUXCIsIGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0KFwiREVMRVRFXCIsIGAvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9maWxlSW1hZ2UodXJsKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbWFrZVJlcXVlc3QoXCJQQVRDSFwiLCBgL3VzZXJzLyR7dGhpcy5fdXNlcn0vYXZhdGFyYCwge1xyXG4gICAgICBhdmF0YXI6IHVybCxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuXHJcbmNvbnN0IGZvcm1JbmZvID0ge1xyXG4gIGJ0bkNsb3NlOiBcIi5mb3JtX19idG4tY2xvc2VcIixcclxuICBoaWRkZW5DbGFzczogXCJwb3B1cF9oaWRkZW5cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5pbnB1dFwiLFxyXG4gIGJ0blN1Ym1pdFNlbGVjdG9yOiBcIi5idG5fc3VibWl0XCIsXHJcbn07XHJcblxyXG5jb25zdCBmb3JtVGV4dEluZm8gPSB7XHJcbiAgbG9hZGluZ1RleHQ6IFwiR3VhcmRhbmRvLi4uXCIsXHJcbiAgYnRuU3VibWl0VGV4dDogXCJHdWFyZGFyXCIsXHJcbn07XHJcblxyXG5jb25zdCBjYXJkSW5mbyA9IHtcclxuICBjYXJkQ2xhc3M6IFwiLmNhcmRcIixcclxuICBpbWdDbGFzczogXCIuY2FyZF9faW1hZ2VcIixcclxuICBidG5EZWxldGVDbGFzczogXCIuYnRuX2RlbGV0ZVwiLFxyXG4gIGJ0bkRlbGV0ZUhpZGRlbjogXCJidG5fZGVsZXRlX2hpZGRlblwiLFxyXG4gIGJ0bkxpa2VDbGFzczogXCIuYnRuX2xpa2VcIixcclxuICBjYXJkVGV4dENsYXNzOiBcIi5jYXJkX190ZXh0XCIsXHJcbiAgYnRuTGlrZUFjdGl2ZUNsYXNzOiBcImJ0bl9saWtlX2FjdGl2ZVwiLFxyXG4gIHRlbXBsYXRlU2VsZWN0b3I6IFwiI3RlbXBsYXRlLWNhcmRcIixcclxuICBsaWtlc0NvdW50Q2xhc3M6IFwiLmNhcmRfX2xpa2VzLWNvdW50XCIsXHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0b3JDb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuaW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnRuLXN1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnRuX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImlucHV0X3R5cGVfZXJyb3JcIixcclxufTtcclxuXHJcbmNvbnN0IHZpZXdTZWN0aW9uSW5mbyA9IHtcclxuICBoaWRkZW5DbGFzczogXCJwb3B1cF9oaWRkZW5cIixcclxuICBidG5DbG9zZTogXCIudmlld19fYnRuLWNsb3NlXCIsXHJcbn07XHJcblxyXG5jb25zdCBnbG9iYWxJbmZvID0ge1xyXG4gIHZpZXdTZWN0aW9uQ2xhc3M6IFwiLnZpZXdcIixcclxuICBjYXJkU2VjdGlvbkNsYXNzOiBcIi5lbGVtZW50c1wiLFxyXG4gIHByb2ZpbGVGb3JtVGVtcGxhdGVJZDogXCIjZm9ybS1lZGl0XCIsXHJcbiAgZm9ybUNsYXNzOiBcIi5mb3JtXCIsXHJcbiAgcHJvZmlsZU5hbWVDbGFzczogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHByb2ZpbGVBYm91dENsYXNzOiBcIi5wcm9maWxlX19hYm91dFwiLFxyXG4gIGJ0bkVkaXRQcm9maWxlQ2xhc3M6IFwiLmJ0bl9lZGl0XCIsXHJcbiAgY2FyZEZvcm1UZW1wbGF0ZUlkOiBcIiNmb3JtLWFkZFwiLFxyXG4gIGJ0bkFkZENhcmRDbGFzczogXCIuYnRuX2FkZFwiLFxyXG4gIGNvbmZpcm1hdGlvbkZvcm1TZWxlY3RvcjogXCIjZm9ybS1kZWxldGVcIixcclxuICBwcm9maWxlRWRpdENvdmVyOiBcIi5wcm9maWxlX19lZGl0LWNvdmVyXCIsXHJcbiAgcHJvZmlsZUF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19hdmF0YXJcIixcclxuICBhdmF0YXJGb3JtU2VsZWN0b3I6IFwiI2Zvcm0tcHJvZmlsZS1pbWdcIixcclxufTtcclxuXHJcbmNvbnN0IGFwaUluZm8gPSB7XHJcbiAgdXNlcjogXCJtZVwiLFxyXG4gIHVybDogYGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzX2NvaG9ydF8wMmAsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI0MzgyMWYwMS00YjI2LTQzYjYtOTk0Zi03MmJmYzk2MGRhYzRcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGZvcm1JbmZvLFxyXG4gIGNhcmRJbmZvLFxyXG4gIHZpZXdTZWN0aW9uSW5mbyxcclxuICB2YWxpZGF0b3JDb25maWcsXHJcbiAgZ2xvYmFsSW5mbyxcclxuICBmb3JtVGV4dEluZm8sXHJcbiAgYXBpSW5mbyxcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IGhhbmRsZVNlcnZlckVycm9yID0gKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGVycik7XHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGZvcm1JbmZvLFxyXG4gIGNhcmRJbmZvLFxyXG4gIHZpZXdTZWN0aW9uSW5mbyxcclxuICBnbG9iYWxJbmZvLFxyXG4gIHZhbGlkYXRvckNvbmZpZyxcclxuICBmb3JtVGV4dEluZm8sXHJcbiAgYXBpSW5mbyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IGhhbmRsZVNlcnZlckVycm9yIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcblxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8tLS0tLS0tLS0tLSBBcGkgLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgdXNlcjogYXBpSW5mby51c2VyLFxyXG4gIHVybDogYXBpSW5mby51cmwsXHJcbiAgaGVhZGVyczogYXBpSW5mby5oZWFkZXJzLFxyXG59KTtcclxuXHJcbmNvbnN0IHZpZXdTZWN0aW9uID0gbmV3IFBvcHVwV2l0aEltYWdlKFxyXG4gIGdsb2JhbEluZm8udmlld1NlY3Rpb25DbGFzcyxcclxuICB2aWV3U2VjdGlvbkluZm9cclxuKTtcclxuXHJcbmNvbnN0IGNvbmZpcm1hdGlvbkZvcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gIGdsb2JhbEluZm8uY29uZmlybWF0aW9uRm9ybVNlbGVjdG9yLFxyXG4gIGZvcm1JbmZvXHJcbik7XHJcblxyXG4vKi0tLS0tLS0tIEZvcm0gRWRpdCBQcm9maWxlIC0tLS0tLS0tKi9cclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBnbG9iYWxJbmZvLnByb2ZpbGVOYW1lQ2xhc3MsXHJcbiAgYWJvdXRTZWxlY3RvcjogZ2xvYmFsSW5mby5wcm9maWxlQWJvdXRDbGFzcyxcclxuICBhdmF0YXJTZWxlY3RvcjogZ2xvYmFsSW5mby5wcm9maWxlQXZhdGFyU2VsZWN0b3IsXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcHJvY2Vzc1VzZXJJbmZvKCkge1xyXG4gIHJldHVybiBhcGlcclxuICAgIC5nZXRVc2VySW5mbygpXHJcbiAgICAudGhlbigoaW5mbykgPT4ge1xyXG4gICAgICB1c2VyLnNldEluaXRpYWxEYXRhKHtcclxuICAgICAgICBpZDogaW5mby5faWQsXHJcbiAgICAgICAgbmFtZTogaW5mby5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBpbmZvLmFib3V0LFxyXG4gICAgICAgIGltZ1VybDogaW5mby5hdmF0YXIsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwb3B1cFNlbGVjdG9yOiBnbG9iYWxJbmZvLnByb2ZpbGVGb3JtVGVtcGxhdGVJZCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvcm1JbmZvLFxyXG4gICAgICAgIChldnQpID0+IHtcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgcHJvZmlsZUZvcm0uc2V0U3VibWl0QnV0dG9uVGV4dChmb3JtVGV4dEluZm8ubG9hZGluZ1RleHQpO1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5lZGl0UHJvZmlsZShcclxuICAgICAgICAgICAgICBwcm9maWxlRm9ybS5nZXRJbnB1dFZhbHVlcygpLm5hbWUsXHJcbiAgICAgICAgICAgICAgcHJvZmlsZUZvcm0uZ2V0SW5wdXRWYWx1ZXMoKS50ZXh0XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgICAgLmdldFVzZXJJbmZvKClcclxuICAgICAgICAgICAgICAgIC50aGVuKChpbmZvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHVzZXIuc2V0VXNlckluZm8oeyBuYW1lOiBpbmZvLm5hbWUsIGFib3V0OiBpbmZvLmFib3V0IH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChoYW5kbGVTZXJ2ZXJFcnJvcilcclxuICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcHJvZmlsZUZvcm0uY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgcHJvZmlsZUZvcm0uc2V0U3VibWl0QnV0dG9uVGV4dChmb3JtVGV4dEluZm8uYnRuU3VibWl0VGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGhhbmRsZVNlcnZlckVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBwcm9maWxlRm9ybS5nZXRFbGVtZW50KCk7XHJcblxyXG4gICAgICBjb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gICAgICAgIHZhbGlkYXRvckNvbmZpZyxcclxuICAgICAgICBwcm9maWxlRm9ybUVsZW1lbnRcclxuICAgICAgKTtcclxuICAgICAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuICAgICAgLy9jb21wb3J0YW1pZW50byBkZWwgYm90b24gcGFyYSBhYnJpciBlbCBmb3JtdWxhcmlvXHJcbiAgICAgIGNvbnN0IGJ0bkVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBnbG9iYWxJbmZvLmJ0bkVkaXRQcm9maWxlQ2xhc3NcclxuICAgICAgKTtcclxuICAgICAgYnRuRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgICAgICAgcHJvZmlsZUZvcm0uc2V0SW5wdXRWYWx1ZXMoeyBuYW1lOiBuYW1lLCB0ZXh0OiBhYm91dCB9KTtcclxuICAgICAgICBwcm9maWxlRm9ybVZhbGlkYXRvci5jaGVja1ZhbGlkaXR5KCk7XHJcbiAgICAgICAgcHJvZmlsZUZvcm0ub3BlbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGVkaXRBdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICAgICAgeyBwb3B1cFNlbGVjdG9yOiBnbG9iYWxJbmZvLmF2YXRhckZvcm1TZWxlY3RvciB9LFxyXG4gICAgICAgIGZvcm1JbmZvLFxyXG4gICAgICAgICgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHVybCA9IGVkaXRBdmF0YXJGb3JtLmdldElucHV0VmFsdWVzKCkudGV4dDtcclxuICAgICAgICAgIGVkaXRBdmF0YXJGb3JtLnNldFN1Ym1pdEJ1dHRvblRleHQoZm9ybVRleHRJbmZvLmxvYWRpbmdUZXh0KTtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuc2V0UHJvZmlsZUltYWdlKHVybClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIHVzZXIuc2V0VXNlckF2YXRhcih1cmwpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goaGFuZGxlU2VydmVyRXJyb3IpXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICBlZGl0QXZhdGFyRm9ybS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIGVkaXRBdmF0YXJGb3JtLnNldFN1Ym1pdEJ1dHRvblRleHQoZm9ybVRleHRJbmZvLmJ0blN1Ym1pdFRleHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICAgICAgICB2YWxpZGF0b3JDb25maWcsXHJcbiAgICAgICAgZWRpdEF2YXRhckZvcm0uZ2V0RWxlbWVudCgpXHJcbiAgICAgICk7XHJcbiAgICAgIGF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gICAgICAvL2NvbXBvcnRhbWllbnRvIGRlbCBib3RvbiBwYXJhIGFicmlyIGVsIGZvcm11bGFyaW9cclxuICAgICAgY29uc3QgYnRuRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2xvYmFsSW5mby5wcm9maWxlRWRpdENvdmVyKTtcclxuICAgICAgYnRuRWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGF2YXRhckZvcm1WYWxpZGF0b3IuY2hlY2tWYWxpZGl0eSgpO1xyXG4gICAgICAgIGVkaXRBdmF0YXJGb3JtLm9wZW4oKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGhhbmRsZVNlcnZlckVycm9yKTtcclxufVxyXG5cclxuLyotLS0tLS0tIENhcmQgRWxlbWVudHMgLS0tLS0tLSovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoXHJcbiAgaXRlbSxcclxuICBpbWdDYWxsYmFjayxcclxuICBkZWxldGVDYWxsYmFjayxcclxuICBsaWtlQ2FsbGJhY2ssXHJcbiAgdGhpc1VzZXJJZFxyXG4pIHtcclxuICBjb25zdCBjYW5EZWxldGUgPSB0aGlzVXNlcklkID09PSBpdGVtLm93bmVyLl9pZCA/IHRydWUgOiBmYWxzZTtcclxuICByZXR1cm4gbmV3IENhcmQoXHJcbiAgICB7IGlkOiBpdGVtLl9pZCwgbmFtZTogaXRlbS5uYW1lLCBpbWdVcmw6IGl0ZW0ubGluaywgbGlrZXM6IGl0ZW0ubGlrZXMgfSxcclxuICAgIGNhcmRJbmZvLFxyXG4gICAgaW1nQ2FsbGJhY2ssXHJcbiAgICBkZWxldGVDYWxsYmFjayxcclxuICAgIGxpa2VDYWxsYmFjayxcclxuICAgIGNhbkRlbGV0ZVxyXG4gICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZUNhcmRDYWxsYmFjayhjYXJkKSB7XHJcbiAgY29uZmlybWF0aW9uRm9ybS5zZXRTdWJtaXRMaXN0ZW5lcigoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgY29uZmlybWF0aW9uRm9ybS5oaWRlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChoYW5kbGVTZXJ2ZXJFcnJvcik7XHJcbiAgfSk7XHJcbiAgY29uZmlybWF0aW9uRm9ybS5zaG93KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckluZGl2aWR1YWxDYXJkKGNhcmQsIHNlY3Rpb24pIHtcclxuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChcclxuICAgIGNhcmQsXHJcbiAgICB2aWV3U2VjdGlvbi5zaG93RWxlbWVudCxcclxuICAgICgpID0+IHtcclxuICAgICAgZGVsZXRlQ2FyZENhbGxiYWNrKG5ld0NhcmQpO1xyXG4gICAgfSxcclxuICAgIChhZGRMaWtlKSA9PiB7XHJcbiAgICAgIGlmIChhZGRMaWtlKSB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS5hZGROZXdMaWtlKG5ld0NhcmQuZ2V0Q2FyZElkKCkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhcGkucmVtb3ZlTGlrZShuZXdDYXJkLmdldENhcmRJZCgpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVzZXIuZ2V0SWQoKVxyXG4gICk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQuZ2V0RWxlbWVudCgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHJvY2Vzc0NhcmRzKCkge1xyXG4gIHJldHVybiBhcGlcclxuICAgIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gICAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb25DYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGl0ZW1zOiBjYXJkcy5yZXZlcnNlKCksXHJcbiAgICAgICAgICByZW5kZXJlcjogcmVuZGVySW5kaXZpZHVhbENhcmQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnbG9iYWxJbmZvLmNhcmRTZWN0aW9uQ2xhc3NcclxuICAgICAgKTtcclxuICAgICAgc2VjdGlvbkNhcmRzLnJlbmRlcigpO1xyXG5cclxuICAgICAgLyotLS0tLS0tLSBGb3JtIEFkZCBDYXJkIC0tLS0tLS0tKi9cclxuICAgICAgY29uc3QgY2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwb3B1cFNlbGVjdG9yOiBnbG9iYWxJbmZvLmNhcmRGb3JtVGVtcGxhdGVJZCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvcm1JbmZvLFxyXG4gICAgICAgIChldnQpID0+IHtcclxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgY29uc3QgbmFtZSA9IGNhcmRGb3JtLmdldElucHV0VmFsdWVzKCkubmFtZTtcclxuICAgICAgICAgIGNvbnN0IGxpbmsgPSBjYXJkRm9ybS5nZXRJbnB1dFZhbHVlcygpLnRleHQ7XHJcbiAgICAgICAgICBjYXJkRm9ybS5zZXRTdWJtaXRCdXR0b25UZXh0KGZvcm1UZXh0SW5mby5sb2FkaW5nVGV4dCk7XHJcbiAgICAgICAgICBpZiAobmFtZSAmJiBsaW5rKSB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5hZGROZXdDYXJkKG5hbWUsIGxpbmspXHJcbiAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoXHJcbiAgICAgICAgICAgICAgICAgIHJlcyxcclxuICAgICAgICAgICAgICAgICAgdmlld1NlY3Rpb24uc2hvd0VsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGVDYXJkQ2FsbGJhY2sobmV3Q2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIChhZGRMaWtlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZExpa2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGkuYWRkTmV3TGlrZShuZXdDYXJkLmdldENhcmRJZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5yZW1vdmVMaWtlKG5ld0NhcmQuZ2V0Q2FyZElkKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgdXNlci5nZXRJZCgpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkNhcmRzLmFkZEl0ZW0obmV3Q2FyZC5nZXRFbGVtZW50KCkpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKGhhbmRsZVNlcnZlckVycm9yKVxyXG4gICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmRGb3JtLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBjYXJkRm9ybS5zZXRTdWJtaXRCdXR0b25UZXh0KGZvcm1UZXh0SW5mby5idG5TdWJtaXRUZXh0KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBjYXJkRm9ybUVsZW1lbnQgPSBjYXJkRm9ybS5nZXRFbGVtZW50KCk7XHJcblxyXG4gICAgICBjb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gICAgICAgIHZhbGlkYXRvckNvbmZpZyxcclxuICAgICAgICBjYXJkRm9ybUVsZW1lbnRcclxuICAgICAgKTtcclxuICAgICAgY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuICAgICAgLy9jb21wb3J0YW1pZW50byBkZWwgYm90b24gcGFyYSBhYnJpciBlbCBmb3JtdWxhcmlvXHJcbiAgICAgIGNvbnN0IGJ0bkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdsb2JhbEluZm8uYnRuQWRkQ2FyZENsYXNzKTtcclxuICAgICAgYnRuQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNhcmRGb3JtVmFsaWRhdG9yLmNoZWNrVmFsaWRpdHkoKTtcclxuICAgICAgICBjYXJkRm9ybS5vcGVuKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChoYW5kbGVTZXJ2ZXJFcnJvcik7XHJcbn1cclxuXHJcbnByb2Nlc3NVc2VySW5mbygpLnRoZW4ocHJvY2Vzc0NhcmRzKS5jYXRjaChoYW5kbGVTZXJ2ZXJFcnJvcik7XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiaW5mbyIsImltZ0NsaWNrQ2FsbGJhY2siLCJkZWxldGVDYWxsYmFjayIsImxpa2VDYWxsYmFjayIsImNhbkRlbGV0ZSIsImlkIiwibmFtZSIsImltZ1VybCIsImxpa2VzIiwiX2RlbGV0ZUNhbGxiYWNrIiwidGhpcyIsIl9pZCIsIl9uYW1lIiwiX2ltZ1VybCIsIl9pbmZvIiwiX2xpa2VzIiwiX2VsZW0iLCJfZ2V0RWxlbWVudEZyb21UZW1wbGF0ZSIsInRlbXBsYXRlU2VsZWN0b3IiLCJfaW1nIiwicXVlcnlTZWxlY3RvciIsImltZ0NsYXNzIiwiX2J0bkRlbGV0ZSIsImJ0bkRlbGV0ZUNsYXNzIiwiX2J0bkxpa2UiLCJidG5MaWtlQ2xhc3MiLCJfbGlrZXNDb3VudCIsImxpa2VzQ291bnRDbGFzcyIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiY2xhc3NMaXN0IiwiYWRkIiwiYnRuTGlrZUFjdGl2ZUNsYXNzIiwiX2ltZ0NhbGxiYWNrIiwiX2xpa2VDYWxsYmFjayIsIl9oYW5kbGVFdmVudExpc3RlbmVycyIsInJlbW92ZSIsImJ0bkRlbGV0ZUhpZGRlbiIsImVsZW0iLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjYXJkQ2xhc3MiLCJjbG9uZU5vZGUiLCJpbWciLCJzcmMiLCJhbHQiLCJjYXJkVGV4dENsYXNzIiwiX2J0bkRlbGV0ZUNsaWNrSGFuZGxlciIsIl9pbWdDbGlja0hhbmRsZXIiLCJfYnRuTGlrZUNsaWNrSGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfYnRuRGVsZXRlQ2FsbGJhY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJ0aGVuIiwicmVzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfY29uZmlnIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImlucHV0IiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsInNvbWUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsImtleSIsIl9oaWRkZW5DbGFzcyIsImhpZGRlbkNsYXNzIiwiX2J0bkNsb3NlIiwiYnRuQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfY2xpY2tPdmVyQ2FsbGJhY2siLCJfYnRuQ2xvc2VDYWxsYmFjayIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRDYWxsYmFjayIsIl9zdWJtaXRFeHRlcm5hbENhbGxiYWNrIiwiX2J0blN1Ym1pdCIsImJ0blN1Ym1pdFNlbGVjdG9yIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZXNldCIsIl9zdWJtaXRJbnRlcm5hbENhbGxiYWNrIiwidmFsdWVzIiwidmFsdWUiLCJkYXRhIiwidGV4dCIsIlBvcHVwV2l0aEltYWdlIiwib3BlbiIsIl92aWV3SW1nIiwiZ2V0RWxlbWVudCIsIl90YXJnZXROYW1lIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiY2FsbGJhY2siLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfZGF0YUlkIiwiX2RhdGFOYW1lIiwiX2RhdGFBYm91dCIsIl9kYXRhSW1nVXJsIiwiX2Fib3V0IiwiX2F2YXRhciIsImFib3V0Iiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwidXJsIiwiQXBpIiwidXNlciIsImhlYWRlcnMiLCJfdXNlciIsIl91cmwiLCJfaGVhZGVycyIsIm1ldGhvZCIsImJvZHkiLCJmZXRjaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzVGV4dCIsIl9tYWtlUmVxdWVzdCIsImxpbmsiLCJjYXJkSWQiLCJhdmF0YXIiLCJmb3JtSW5mbyIsImZvcm1UZXh0SW5mbyIsImNhcmRJbmZvIiwidmFsaWRhdG9yQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiYXBpSW5mbyIsImF1dGhvcml6YXRpb24iLCJoYW5kbGVTZXJ2ZXJFcnJvciIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhcGkiLCJ2aWV3U2VjdGlvbiIsImNvbmZpcm1hdGlvbkZvcm0iLCJjcmVhdGVDYXJkIiwiaW1nQ2FsbGJhY2siLCJ0aGlzVXNlcklkIiwib3duZXIiLCJkZWxldGVDYXJkQ2FsbGJhY2siLCJjYXJkIiwic2V0U3VibWl0TGlzdGVuZXIiLCJkZWxldGVDYXJkIiwiZ2V0Q2FyZElkIiwicmVtb3ZlQ2FyZCIsImhpZGUiLCJjYXRjaCIsInNob3ciLCJyZW5kZXJJbmRpdmlkdWFsQ2FyZCIsInNlY3Rpb24iLCJuZXdDYXJkIiwic2hvd0VsZW1lbnQiLCJhZGRMaWtlIiwiYWRkTmV3TGlrZSIsInJlbW92ZUxpa2UiLCJnZXRJZCIsImFkZEl0ZW0iLCJnZXRVc2VySW5mbyIsInNldEluaXRpYWxEYXRhIiwicHJvZmlsZUZvcm0iLCJzZXRTdWJtaXRCdXR0b25UZXh0IiwiZWRpdFByb2ZpbGUiLCJnZXRJbnB1dFZhbHVlcyIsImZpbmFsbHkiLCJwcm9maWxlRm9ybUVsZW1lbnQiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRJbnB1dFZhbHVlcyIsImNoZWNrVmFsaWRpdHkiLCJlZGl0QXZhdGFyRm9ybSIsInNldFByb2ZpbGVJbWFnZSIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsInNlY3Rpb25DYXJkcyIsInJldmVyc2UiLCJyZW5kZXIiLCJjYXJkRm9ybSIsImFkZE5ld0NhcmQiLCJjYXJkRm9ybUVsZW1lbnQiLCJjYXJkRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=